# 多进程斐波那契计算示例

这个Python程序展示了如何使用多进程并行计算斐波那契数列，每个进程使用不同的算法实现。

## 功能特点

- 使用Python的`multiprocessing`模块创建多个并行进程
- 实现了多种不同的斐波那契数列计算方法：
  1. 递归方法 (时间复杂度: O(2^n))
  2. 带记忆化的递归方法 (时间复杂度: O(n))
  3. 迭代方法 (时间复杂度: O(n))
  4. 矩阵幂方法 (时间复杂度: O(log n))
  5. 数学公式方法 (时间复杂度: O(1)，但有浮点数精度问题)
  6. 动态规划方法 (时间复杂度: O(n))
- 比较不同算法的执行时间和效率
- 使用进程间通信（队列）收集结果

## 运行要求

- Python 3.6+
- 基础版本无需额外依赖库
- 高级版本需要安装psutil库：`pip install -r requirements.txt`

## 程序版本

本仓库包含两个版本的斐波那契多进程计算程序：

### 1. 基础版本 (fibonacci_multiprocess.py)

简单的多进程斐波那契计算程序，固定计算第35项斐波那契数。

```bash
python fibonacci_multiprocess.py
```

### 2. 高级版本 (advanced_fibonacci_multiprocess.py)

功能更丰富的多进程斐波那契计算程序，支持命令行参数配置，包括：

- 自定义要计算的斐波那契数
- 选择要使用的计算方法
- 设置递归方法的限制
- 指定进程数量
- 基准测试模式

#### 使用方法

```bash
# 基本用法
python advanced_fibonacci_multiprocess.py

# 计算第40项斐波那契数
python advanced_fibonacci_multiprocess.py -n 40

# 只使用迭代和矩阵方法
python advanced_fibonacci_multiprocess.py -m iterative matrix

# 运行基准测试，每种方法运行5次
python advanced_fibonacci_multiprocess.py -b -c 5

# 完整参数说明
python advanced_fibonacci_multiprocess.py --help
```

#### 命令行参数

- `-n`: 要计算的斐波那契数 (默认: 35)
- `-m, --methods`: 要使用的计算方法 (默认: 全部)
- `-r, --recursive-limit`: 递归方法的最大n值 (默认: 30)
- `-p, --processes`: 要使用的进程数量 (默认: 与方法数量相同)
- `-b, --benchmark`: 运行基准测试模式
- `-c, --benchmark-count`: 基准测试模式下每种方法运行的次数 (默认: 3)

## 算法说明

1. **递归方法**：最直观但最低效的方法，存在大量重复计算。
2. **记忆化递归**：通过缓存中间结果避免重复计算，大大提高效率。
3. **迭代方法**：使用循环代替递归，避免栈溢出问题。
4. **矩阵幂方法**：利用矩阵乘法和快速幂算法，对大数非常高效。
5. **公式方法**：使用数学公式直接计算，理论上最快，但可能有浮点数精度问题。
6. **动态规划方法**：使用数组存储中间结果，避免重复计算。

## 示例输出

### 基础版本输出

```
开始计算斐波那契数 F(35)...

计算结果:
--------------------------------------------------------------------------------
进程名称         实现方法                n值   结果            执行时间(秒)     
--------------------------------------------------------------------------------
公式进程         fibonacci_formula      35    9227465         0.000026      
矩阵进程         fibonacci_matrix       35    9227465         0.000121      
迭代进程         fibonacci_iterative    35    9227465         0.000142      
记忆化递归进程    fibonacci_memoization  35    9227465         0.000315      
递归进程         fibonacci_recursive    30    832040          0.328742      
```

### 高级版本基准测试输出

```
运行基准测试模式，每种方法运行3次...
运行第 1/3 轮...
运行第 2/3 轮...
运行第 3/3 轮...

基准测试结果:
------------------------------------------------------------------------------------------------------------------------
实现方法                n值   结果            平均执行时间(秒)         最短时间(秒)       最长时间(秒)       平均内存(MB)     
------------------------------------------------------------------------------------------------------------------------
fibonacci_formula      35    9227465         0.000031                0.000026          0.000038          0.000000      
fibonacci_matrix       35    9227465         0.000136                0.000121          0.000152          0.000000      
fibonacci_iterative    35    9227465         0.000158                0.000142          0.000173          0.000000      
fibonacci_dp           35    9227465         0.000183                0.000168          0.000198          0.125000      
fibonacci_memoization  35    9227465         0.000342                0.000315          0.000368          0.000000      
fibonacci_recursive    30    832040          0.345821                0.328742          0.362900          0.000000      
```

## 注意事项

- 对于非常大的斐波那契数，所有方法都可能面临整数溢出问题
- 公式方法对于较大的数可能会有精度问题
- 纯递归方法对于n>40的值会非常慢，甚至可能导致程序崩溃
- 高级版本需要安装psutil库来监控内存使用情况 